<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Mulid Tools - ë¬´ë£Œ ì˜¤ë””ì˜¤ ë³€í™˜ê¸°</title>
  <meta name="description" content="ì„¤ì¹˜ ì—†ì´ mp3, wav ë“± ì˜¤ë””ì˜¤ íŒŒì¼ì„ ë¬´ë£Œë¡œ ë³€í™˜í•˜ì„¸ìš”. ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      background: #fafafa;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    main {
      max-width: 720px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.6;
    }

    h1, h2 {
      margin-bottom: 10px;
    }

    section {
      margin-bottom: 40px;
    }

    .box {
      border: 1px solid #ddd;
      padding: 20px;
      border-radius: 8px;
      background: #fff;
    }

    button {
      padding: 10px 16px;
      font-size: 15px;
      cursor: pointer;
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    progress {
      width: 100%;
      height: 18px;
      margin-top: 8px;
    }

    footer {
      margin-top: 60px;
      font-size: 14px;
      color: #666;
      text-align: center;
    }
  </style>
</head>

<body>

<main>

  <!-- ğŸ”¥ í—¤ë” -->
  <section style="text-align:center;">
    <h1>Mulid Tools</h1>
    <p>
      ì„¤ì¹˜ ì—†ì´ ì‚¬ìš©í•˜ëŠ” <strong>ë¬´ë£Œ ì˜¤ë””ì˜¤ ë³€í™˜ ì›¹ ë„êµ¬</strong><br />
      mp3 Â· wav ë“± ì˜¤ë””ì˜¤ íŒŒì¼ì„ ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ ë³€í™˜í•˜ì„¸ìš”.
    </p>
  </section>

  <!-- ğŸ¯ ë³€í™˜ ì˜ì—­ -->
  <section class="box">
    <h2>íŒŒì¼ ë³€í™˜</h2>

    <input type="file" id="fileInput" />
    <br /><br />
    <button id="uploadBtn">ë³€í™˜í•˜ê¸°</button>

    <!-- ë¡œë”© UI -->
    <div id="loading" style="display:none; margin-top:15px;">
      <div>ë³€í™˜ ì¤‘ì…ë‹ˆë‹¤â€¦ â³</div>
      <progress id="progressBar" value="0" max="100"></progress>
    </div>
  </section>

  <!-- ğŸ“˜ ì‚¬ìš© ë°©ë²• -->
  <section>
    <h2>ì‚¬ìš© ë°©ë²•</h2>
    <ol>
      <li>ë³€í™˜í•  ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì„ íƒí•©ë‹ˆë‹¤.</li>
      <li>ë³€í™˜í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.</li>
      <li>ë³€í™˜ì´ ì™„ë£Œë˜ë©´ íŒŒì¼ì´ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤.</li>
    </ol>
  </section>

  <!-- ğŸ”’ ì•ˆë‚´ -->
  <section>
    <h2>ì•ˆì „ ì•ˆë‚´</h2>
    <ul>
      <li>ì—…ë¡œë“œëœ íŒŒì¼ì€ ë³€í™˜ í›„ ìë™ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤.</li>
      <li>íšŒì›ê°€ì… ì—†ì´ ë¬´ë£Œë¡œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
      <li>ë³¸ ì‚¬ì´íŠ¸ëŠ” ê°œì¸ í”„ë¡œì íŠ¸ë¡œ ìš´ì˜ë©ë‹ˆë‹¤.</li>
    </ul>
  </section>

  <!-- ğŸ§¾ í‘¸í„° -->
  <footer>
    <p>Â© 2026 Mulid Tools</p>
    <p>ë¬¸ì˜ ë° í”¼ë“œë°±ì€ GitHub ì €ì¥ì†Œë¥¼ í†µí•´ ì£¼ì„¸ìš”.</p>
  </footer>

</main>

<!-- âš™ï¸ JS: ì§„í–‰ë°” + ìë™ ë‹¤ìš´ë¡œë“œ -->
<script>
const uploadBtn = document.getElementById("uploadBtn");
const fileInput = document.getElementById("fileInput");
const loading = document.getElementById("loading");
const progressBar = document.getElementById("progressBar");

uploadBtn.addEventListener("click", async () => {
  if (!fileInput.files.length) {
    alert("íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”");
    return;
  }

  uploadBtn.disabled = true;
  loading.style.display = "block";
  progressBar.value = 0;

  // UXìš© ê°€ì§œ ì§„í–‰ë°”
  let percent = 0;
  const timer = setInterval(() => {
    percent += 3;
    if (percent >= 95) percent = 95;
    progressBar.value = percent;
  }, 200);

  try {
    const formData = new FormData();
    formData.append("file", fileInput.files[0]);

    const res = await fetch("âš ï¸ì—¬ê¸°ì—_ì„œë²„ì£¼ì†Œâš ï¸/upload-and-convert", {
      method: "POST",
      body: formData
    });

    const data = await res.json();
    if (!data.success) throw new Error("ë³€í™˜ ì‹¤íŒ¨");

    progressBar.value = 100;

    // ìë™ ë‹¤ìš´ë¡œë“œ
    const a = document.createElement("a");
    a.href = `âš ï¸ì—¬ê¸°ì—_ì„œë²„ì£¼ì†Œâš ï¸/download/${data.output}`;
    a.download = data.output;
    document.body.appendChild(a);
    a.click();
    a.remove();

  } catch (err) {
    alert("ë³€í™˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
    console.error(err);
  } finally {
    clearInterval(timer);
    uploadBtn.disabled = false;
    loading.style.display = "none";
  }
});
</script>

</body>
</html>
